(function(){var n={}.hasOwnProperty;!function(n){var i;i="object"==typeof self&&("undefined"!=typeof self&&null!==self?self.self:void 0)===self?self:"object"==typeof global&&("undefined"!=typeof global&&null!==global?global.global:void 0)===global?global:void 0,"function"==typeof define&&define.amd?(i.PublisherSubscriber=n(i),define(function(){return i.PublisherSubscriber})):"object"==typeof module&&null!==module&&null!=module.exports&&"object"==typeof module.exports?module.exports=n(i):i.PublisherSubscriber=n(i)}(function(i){var l,t,e,r,u,o,f,c,s,a,h;return l={},r=(null!=(a=i._)?a.generateID:void 0)||function(){var n;return n=0,function(){return++n}}(),u=function(n){return null!=n.oid?n.oid:n.oid=r()},h=function(n,i){return"string"==typeof i?n[i]:i},o=function(n,i){var l,t,e;l=null!=i._3?i._3:i._3={},e=null!=l[t=null!=n.oid?n.oid:n.oid=r()]?l[t]:l[t]=[n,0],e[1]+=1},t=function(n,i,l){var t,e;t=null!=n.oid?n.oid:n.oid=r(),e=i._3[t],null!=e&&(e[1]-=0|l)<1&&delete i._3[t]},e=function(n){return n.indexOf(":")>-1?n.replace(/:/g,"_"):n},f=function(n){return null!=n&&"number"==typeof n.length},s=function(n){return n!==!1&&(n&&n.silent)!==!0},c=function(n){return n&&n.on===l.on},function(){var i,t,e,r,u,o,f,c,s;f=function(n,i,l,t){var e,r;return e=!1,r=function(){e||(e=!0,n.off(i,r,t),l.apply(t,arguments))},r._cb=l,r},i=function(n,i,l,t,e){var r,u,o;return u=e===!0?f(n,i,l,t):l,(null!=(r=null!=n._2?n._2:n._2={})[o=i.indexOf(":")>-1?i.replace(/:/g,"_"):i]?r[o]:r[o]=[]).push(void 0,u,t)},r=function(n,i,l,t,e){var r,u,o,c,s,a,h,g,d;if(-1===i.indexOf(" "))o=e===!0?f(n,i,l,t):l,(null!=(r=null!=n._2?n._2:n._2={})[g=i.indexOf(":")>-1?i.replace(/:/g,"_"):i]?r[g]:r[g]=[]).push(void 0,o,t);else for(h=i.length,s=-1,a=0;++s<=h;)s===h||" "===i[s]?a>0&&(c=i.slice(s-a,s),o=e===!0?f(n,c,l,t):l,(null!=(u=null!=n._2?n._2:n._2={})[d=c.indexOf(":")>-1?c.replace(/:/g,"_"):c]?u[d]:u[d]=[]).push(void 0,o,t),a=0):++a},t=function(n,l,t,e,r){var u,o,f;for(f=0,o=l.length;o>f;f++)u=l[f],i(n,u,t,e,r)},e=function(n,i,l,t){var e;for(e in i)r(n,e,"string"==typeof i[e]?n[i[e]]:i[e],l,t)},c={bind:!1,bindOnce:!0},u=function(n,i){return l[n]=function(n,l,t){return"string"==typeof n?l&&r(this,n,"string"==typeof l?this[l]:l,t||this,i):e(this,n,t||l||this,i),this}};for(o in c)n.call(c,o)&&(s=c[o],u(o,s));l.on=l.bind,l.once=l.bindOnce}(),function(){var i,t,e,u,o,f,c,s;f=function(n,i,l,t){var e,r;return e=!1,r=function(){e||(e=!0,i.stopListening(n,l,r),t.apply(i,arguments))},r._cb=t,r},e=function(n,i,l,t,e){var u,o,c,s,a,h;o=e===!0?f(n,i,l,t):t,(null!=(u=null!=n._2?n._2:n._2={})[s=l.indexOf(":")>-1?l.replace(/:/g,"_"):l]?u[s]:u[s]=[]).push(i,o,i),c=null!=i._3?i._3:i._3={},h=null!=c[a=null!=n.oid?n.oid:n.oid=r()]?c[a]:c[a]=[n,0],h[1]+=1},o=function(n,i,l,t,r){var u,o,f;if(-1===l.indexOf(" "))e(n,i,l,t,r);else for(f=l.length,u=-1,o=0;++u<=f;)u===f||" "===l[u]?o>0&&(e(n,i,l.slice(u-o,u),t,r),o=0):++o},u=function(n,i,l,t){var e;for(e in l)o(n,i,e,"string"==typeof l[e]?i[l[e]]:l[e],t)},c={listenTo:!1,listenToOnce:!0},i=function(n,i){return l[n]=function(n,l,t){return"string"==typeof l?t&&o(n,this,l,"string"==typeof t?this[t]:t,i):u(n,this,l,i),this}};for(t in c)n.call(c,t)&&(s=c[t],i(t,s))}(),function(){var i,e,r,u,o,f,c,s;i=function(n,i,l){var t,e,r;for(e=n.length,r=[],t=-1;(t+=3)<e;)(i!==n[t-2]||l&&l!==n[t-1]&&l!==n[t-1]._cb)&&r.push(n[t-2],n[t-1],n[t]);return r},r=function(n,l,e,r){var u,o,f,c,s,a;s=0,a=n._2,o=e.indexOf(":")>-1?e.replace(/:/g,"_"):e,null!=a&&null!=(u=a[o])&&(c=u.length,s+=c,c>2&&(f=i(u,l,r),s-=f.length),a[o]=f,s>0&&t(n,l,s/3))},s=function(n,l){var e,r,u,o,f,c;c=n._2,f=0;for(r in c)e=c[r],null!=e&&(o=e.length,f+=o,o>2&&(u=i(e,l),f-=u.length),c[r]=u);f>0&&t(n,l,f/3)},c=function(n){var i,l,t;t=n._3;for(i in t)l=t[i],s(l[0],n)},o=function(n,i,l,t){var e,r,u;for(u=l.length,e=-1,r=0;++e<=u;)e===u||" "===l[e]?r>0&&(f(n,i,l.slice(e-r,e),t),r=0):++r},f=function(n,i,l,t){var e,u,o;o=i._3;for(e in o)u=o[e],(null==n||u[0]===n)&&r(u[0],i,l,t)},u=function(i,l,t){var e,r;for(r in t)n.call(t,r)&&(e=t[r],o(i,l,r,"string"==typeof t[r]?l[t[r]]:t[r]))},e=function(n,i,l){var t,e,u,o,f;f=i._3;for(u in f)if(o=f[u],null==n||(e=o[0])===n)for(t in e._2)r(e,i,t,l)},l.stopListening=function(n,i,l){return null!=this._3&&(null==n&&null==i&&null==l?c(this):null!=i?"string"==typeof i?o(n,this,i,"string"==typeof l?this[l]:l):u(n,this,i):e(n,this,"string"==typeof l?this[l]:l)),this}}(),function(){var n,i,t;n=function(n,i){var l,t,e,r,u;if(0!==n.length)switch(r=-1,u=n.length,l=u>0&&i[0],t=u>1&&i[1],e=u>2&&i[2],i.length){case 0:for(;(r+=3)<u;)n[r-1].call(n[r]);break;case 1:for(;(r+=3)<u;)n[r-1].call(n[r],l);break;case 2:for(;(r+=3)<u;)n[r-1].call(n[r],l,t);break;case 3:for(;(r+=3)<u;)n[r-1].call(n[r],l,t,e);break;default:for(;(r+=3)<u;)n[r-1].apply(n[r],i)}},t=function(i,l,t){var e,r,u,o,f,c;if(o=i[l.indexOf(":")>-1?l.replace(/:/g,"_"):l],e=i.all,null!=o){if(null!=e)for(c=e,e=[],f=0,u=c.length;u>f;f++)r=c[f],e.push(r);n(o,t)}null!=e&&(t.unshift(l),n(e,t),t.shift())},i=function(n,i,l){var e,r,u;for(u=i.length,e=-1,r=0;++e<=u;)e===u||" "===i[e]?r>0&&(t(n,i.slice(e-r,e),l),r=0):++r},l.trigger=l.notify=function(n){var l,e,r,u,o;if(null!=(u=this._2)&&(r=arguments.length)>0&&(o=n.indexOf(" ")>-1||null!=u[n.indexOf(":")>-1?n.replace(/:/g,"_"):n]||null!=u.all)){for(e=0,l=[];++e<r;)l.push(arguments[e]);o===!0?i(u,n,l):t(u,n,l)}return this}}(),function(){var n,i,e,r,u;i=function(n,i,l,e){var r,u,o,f,c,s;if(u=i.indexOf(":")>-1?i.replace(/:/g,"_"):i,null!=(r=n._2[u])&&!((f=r.length)<3)){for(c=null,o=-1;(o+=3)<f;)null!=l&&l!==r[o-1]&&l!==r[o-1]._cb||null!=e&&e!==r[o]?(null!=c?c:c=[]).push(r[o-2],r[o-1],r[o]):null!=(s=r[o-2])&&t(n,s,1);n._2[u]=c}},r=function(n,l,t,e){var r,u,o;for(o=l.length,r=-1,u=0;++r<=o;)r===o||" "===l[r]?u>0&&(i(n,l.slice(r-u,r),t,e),u=0):++u},e=function(n,i,l){var t;for(t in i)r(n,t,"string"==typeof i[t]?n[i[t]]:i[t],l)},u=function(n){var i,l,e,r,u,o;u=n._2;for(l in u)if(i=u[l],null!=i)for(r=0,e=i.length;e>r;r+=3)o=i[r],null!=o&&t(n,o,1);n._2=null},n=function(n,l,t){var e;for(e in n._2)i(n,e,l,t)},l.unbind=l.off=function(i,l,t){return this._2&&(null==i&&null==l&&null==t?u(this):null!=i?"string"==typeof i?r(this,i,"string"==typeof l?this[l]:l,t):e(this,i,t||l):n(this,l,t)),this}}(),{VERSION:"1.0.4",isNoisy:s,isEventable:c,InstanceMembers:l,included:function(n){"function"==typeof n.initializer&&n.initializer("publisher-subscriber",function(){this._2={},this._3={}})}}})}).call(this);