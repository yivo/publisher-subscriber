(function(){!function(n){var t;t="object"==typeof self&&null!==self&&self.self===self?self:"object"==typeof global&&null!==global&&global.global===global?global:Function("return this")(),"function"==typeof define&&"object"==typeof define.amd&&null!==define.amd?(t.PublisherSubscriber=n(t,Object),define(function(){return t.PublisherSubscriber})):"object"==typeof module&&null!==module&&"object"==typeof module.exports&&null!==module.exports?module.exports=n(t,Object):t.PublisherSubscriber=n(t,Object)}(function(n,t){var e,l,i,r,o,u,f,s,_,c,h,a,g,v,p,d,b,y,j,m,O,k,x,w,S,I,P,E,L,N,T,z,D,F,M,R,V,q,A,B,C,G,H,J;return l={},s=null!=(j=null!=(m=n._)?m.generateID:void 0)?j:function(){var n;return n=0,function(){return++n}}(),y=null!=(O=null!=(k=n._)?k.keys:void 0)?O:t.keys,d=null!=t.create?function(){return t.create(null)}:function(){return{}},b=null!=(x=t.freeze)?x:function(n){return n},E=function(n){return null!=n.oid?n.oid:n.oid=s()},I=function(n){return null!=n.__listeners__?n.__listeners__:n.__listeners__=d()},S=function(n,t){var e;return null!=(e=I(n))[t]?e[t]:e[t]=[]},P=function(n){return null!=n.__listening__?n.__listening__:n.__listening__=d()},w=function(n,t){return"string"==typeof t?n[t]:t},_=function(n,t){var e,l,i;e=P(t),i=null!=e[l=E(n)]?e[l]:e[l]=[n,0],i[1]+=1},f=function(n,t,e){var l,i;l=E(n),i=t.__listening__[l],null!=i&&(i[1]-=0|e)<1&&delete t.__listening__[l]},h=function(n){return n!==!1&&(null!=n?n.silent:void 0)!==!0},c=function(n){return(null!=n?n.on:void 0)===l.on},e=d(),b(e),u=function(n,t,e,l){var i,r;return i=!1,r=function(){i===!1&&(i=!0,n.off(t,r),e.apply(l,arguments))},r.__wrapped__=e,r},i=function(n,t,e,l,i,r){var o;o=r===!0?u(n,t,e,i):e,S(n,t).push(null,o,l,i)},o=function(n,t,e,l,r,o){var u,f,s;if(t.indexOf(" ")===-1)i(n,t,e,l,r,o);else for(s=t.length,u=-1,f=0;++u<=s;)u===s||" "===t[u]?f>0&&(i(n,t.slice(u-f,u),e,l,r,o),f=0):++f},r=function(n,t,e,l,i){var r,u,f,s;for(s=y(t),f=0,u=s.length;f<u;f++)r=s[f],o(n,r,w(n,t[r]),e,l,i)},function(){var n,t,e,i,u,f;for(u=["on","once"],f=[],n=e=0,t=u.length;e<t;n=++e)i=u[n],f.push(l[i]=function(n){return function(t){var e,l,i,u,f;return e=arguments,l=arguments.length,"string"==typeof t?l>1&&"function"==typeof(i=w(this,e[1]))&&(l>2&&(f=e[2]),u=l>2?f:this,o(this,t,i,f,u,n)):"object"==typeof t&&null!==t&&(u=l>2?f=e[2]:l>1?f=e[1]:this,r(this,t,f,u,n)),this}}(1===n));return f}(),l.bind=l.on,p=function(n,t,e,l){var i,r;return i=!1,r=function(){i===!1&&(i=!0,t.stopListening(n,e,r),l.apply(t,arguments))},r.__wrapped__=l,r},a=function(n,t,e,l,i){var r;r=i===!0?p(n,t,e,l):l,S(n,e).push(t,r,t,t),_(n,t)},v=function(n,t,e,l,i){var r,o,u;if(e.indexOf(" ")===-1)a(n,t,e,l,i);else for(u=e.length,r=-1,o=0;++r<=u;)r===u||" "===e[r]?o>0&&(a(n,t,e.slice(r-o,r),l,i),o=0):++o},g=function(n,t,e,l){var i,r,o,u;for(u=y(e),o=0,r=u.length;o<r;o++)i=u[o],v(n,t,i,w(t,e[i]),l)},function(){var n,t,e,i,r,o;for(r=["listenTo","listenToOnce"],o=[],n=e=0,t=r.length;e<t;n=++e)i=r[n],o.push(l[i]=function(n){return function(t,e,l){var i,r;return i=arguments,r=i.length,"string"==typeof e?r>2&&"function"==typeof(l=w(this,i[2]))&&v(t,this,e,l,n):"object"==typeof e&&null!==e&&g(t,this,e,n),this}}(1===n));return o}(),R=function(n,t,e){var l,i,r;for(i=n.length,r=[],l=-1;(l+=4)<i;)(t!==n[l-3]||null!=e&&e!==n[l-2]&&e!==n[l-2].__wrapped__)&&r.push(n[l-3],n[l-2],n[l-1],n[l]);return r},N=function(n,t,e,l){var i,r,o,u,s;s=0,u=n.__listeners__,null!=(i=u[e])&&(o=i.length,s+=o,o>3?(r=R(i,t,l),s-=r.length,u[e]=r):u[e]=[]),s>0&&f(n,t,s/4)},M=function(n,t){var e,l,i,r,o,u,s,_,c;for(_=0,u=n.__listeners__,c=y(u),s=0,o=c.length;s<o;s++)l=c[s],e=u[l],r=e.length,_+=r,r>3?(i=R(e,t,null),_-=i.length,u[l]=i):u[l]=[];_>0&&f(n,t,_/4)},F=function(n){var t,e,l,i,r;for(e=n.__listening__,r=y(e),l=0,t=r.length;l<t;l++)i=r[l],M(e[i][0],n)},z=function(n,t,e,l){var i,r,o;for(o=e.length,i=-1,r=0;++i<=o;)i===o||" "===e[i]?r>0&&(D(n,t,e.slice(i-r,i),l),r=0):++r},D=function(n,t,e,l){var i,r,o,u,f,s;for(r=t.__listening__,s=y(r),o=0,i=s.length;o<i;o++)u=s[o],f=r[u],null!=n&&f[0]!==n||N(f[0],t,e,l)},T=function(n,t,e){var l,i,r,o;for(o=y(e),r=0,i=o.length;r<i;r++)l=o[r],z(n,t,l,w(t,e[l]))},L=function(n,t,e){var l,i,r,o,u,f,s,_,c,h,a;for(u=t.__listening__,h=y(u),f=0,i=h.length;f<i;f++)if(_=h[f],c=u[_],null==n||c[0]===n)for(o=c[0].__listeners__,a=y(o),s=0,r=a.length;s<r;s++)l=a[s],N(c[0],t,l,e)},l.stopListening=function(n,t){var e,l;return null!=this.__listening__&&(e=arguments,l=e.length,0===l?F(this):"string"==typeof t?z(n,this,t,l>2?w(this,e[2]):void 0):"object"==typeof t&&null!==t?T(n,this,t):L(n,this,l>2?w(this,e[2]):void 0)),this},A=function(n,t){var e,l;switch(e=-1,l=n.length,t.length){case 0:for(;(e+=4)<l;)n[e-2].call(n[e]);break;case 1:for(;(e+=4)<l;)n[e-2].call(n[e],t[0]);break;case 2:for(;(e+=4)<l;)n[e-2].call(n[e],t[0],t[1]);break;case 3:for(;(e+=4)<l;)n[e-2].call(n[e],t[0],t[1],t[2]);break;default:for(;(e+=4)<l;)n[e-2].apply(n[e],t)}},V=function(n,t,e){var l,i;l=n[t],i=n.all,(null!=l?l.length:void 0)>0&&((null!=i?i.length:void 0)>0&&(i=i.slice()),A(l,e)),(null!=i?i.length:void 0)>0&&(e.unshift(t),A(i,e),e.shift())},q=function(n,t,e){var l,i,r;for(r=t.length,l=-1,i=0;++l<=r;)l===r||" "===t[l]?i>0&&(V(n,t.slice(l-i,l),e),i=0):++i},l.trigger=l.notify=function(n){var t,e,l,i,r,o,u;if(null!=(r=this.__listeners__)&&((e=n.indexOf(" "))>-1||(null!=(o=r[n])?o.length:void 0)>0||(null!=(u=r.all)?u.length:void 0)>0)){for(l=0,i=arguments.length,t=[];++l<i;)t.push(arguments[l]);e>-1?q(r,n,t):V(r,n,t)}return this},C=function(n,t,l,i){var r,o,u,s,_;if(null!=(r=n.__listeners__[t])&&!((u=r.length)<4)){for(s=[],o=-1;(o+=4)<u;)void 0!==l&&null!==l&&l!==r[o-2]&&l!==r[o-2].__wrapped__||i!==e&&i!==r[o-1]?s.push(r[o-3],r[o-2],r[o-1],r[o]):null!=(_=r[o-3])&&f(n,_,1);n.__listeners__[t]=s}},H=function(n,t,e,l){var i,r,o;for(o=t.length,i=-1,r=0;++i<=o;)i===o||" "===t[i]?r>0&&(C(n,t.slice(i-r,i),e,l),r=0):++r},G=function(n,t,e){var l,i,r,o;for(o=y(t),r=0,i=o.length;r<i;r++)l=o[r],H(n,l,w(n,t[l]),e)},J=function(n){var t,e,l,i,r,o,u,s,_;for(i=n.__listeners__,u=y(i),r=0,e=u.length;r<e;r++)for(t=u[r],s=i[t],o=0,l=s.length;o<l;o+=4)_=s[o],null!=_&&f(n,_,1);n.__listeners__=null},B=function(n,t,e){var l,i,r,o;for(o=y(n.__listeners__),r=0,i=o.length;r<i;r++)l=o[r],C(n,l,t,e)},l.unbind=l.off=function(n){var t,l,i,r;return null!=this.__listeners__&&(t=arguments,l=t.length,0===l?J(this):"string"==typeof n?(l>1&&(i=w(this,t[1])),r=l>2?t[2]:e,H(this,n,i,r)):"object"==typeof n&&null!==n?(r=l>1?t[1]:e,G(this,n,r)):(l>1&&(i=w(this,t[1])),r=l>2?t[2]:e,B(this,i,r))),this},b({VERSION:"1.0.12",isNoisy:h,isEventable:c,InstanceMembers:b(l)})})}).call(this);